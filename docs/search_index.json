[["interactive-component.html", "Chapter 6 Interactive component", " Chapter 6 Interactive component ##Interactive data&lt;-read.csv(file = &#39;ca-educational-attainment-personal-income-2008-2014.csv&#39;, header = TRUE) data_p&lt;-data %&gt;% filter(Age == &#39;18 to 64&#39;) data_p$Educational.Attainment&lt;-factor(data_p$Educational.Attainment, levels = c(&quot;Bachelor&#39;s degree or higher&quot;,&quot;Some college, less than 4-yr degree&quot;, &quot;High school or equivalent&quot;,&quot;No high school diploma&quot;)) data_p$Personal.Income&lt;-factor(data_p$Personal.Income, levels = c(&#39;$75,000 and over&#39;,&#39;$50,000 to $74,999&#39;,&#39;$35,000 to $49,999&#39;,&#39;$25,000 to $34,999&#39;, &#39;$15,000 to $24,999&#39;,&#39;$10,000 to $14,999&#39;,&#39;$5,000 to $9,999&#39;,&#39;No Income&#39;)) data_p$Year&lt;-fct_recode(data_p$Year, &quot;2008&quot;=&#39;01/01/2008 12:00:00 AM&#39;,&quot;2009&quot;=&#39;01/01/2009 12:00:00 AM&#39;, &quot;2010&quot;=&#39;01/01/2010 12:00:00 AM&#39;,&quot;2011&quot;=&#39;01/01/2011 12:00:00 AM&#39;, &quot;2012&quot;=&#39;01/01/2012 12:00:00 AM&#39;,&quot;2013&quot;=&#39;01/01/2013 12:00:00 AM&#39;, &quot;2014&quot;=&#39;01/01/2014 12:00:00 AM&#39;) data_p$Educational.Attainment&lt;- fct_recode(data_p$Educational.Attainment, &quot;&gt;=Bachelor&quot; = &quot;Bachelor&#39;s degree or higher&quot;,&quot;College (&lt;4year)&quot; = &quot;Some college, less than 4-yr degree&quot;, &quot;High school or equivalent&quot; = &quot;High school or equivalent&quot;,&quot;&lt; high school&quot; = &quot;No high school diploma&quot;) data_p$Personal.Income&lt;- fct_recode(data_p$Personal.Income, &quot;[75k,inf)&quot;=&#39;$75,000 and over&#39;,&quot;[50k,75k)&quot;=&#39;$50,000 to $74,999&#39;,&quot;[35k,50k)&quot;=&#39;$35,000 to $49,999&#39;, &quot;[25k,35k)&quot;=&#39;$25,000 to $34,999&#39;,&quot;[15k,25k)&quot;=&#39;$15,000 to $24,999&#39;,&quot;[10k,15k)&quot;=&#39;$10,000 to $14,999&#39;, &quot;[5k,10k)&quot;=&#39;$5,000 to $9,999&#39;,&#39;No Income&#39;=&#39;No Income&#39;) 6.0.1 line plot population proportion for salary level for different year. interactive in showing the exact data when mouse is on points. data_inter&lt;-data_p %&gt;% group_by(Year, Personal.Income) %&gt;% #if we study gender, add Gender mutate(total = sum(Population.Count)) %&gt;% group_by(Year) %&gt;% mutate(year_total = sum(Population.Count)) %&gt;% ungroup() %&gt;% summarise(Year = Year, Personal.Income = Personal.Income, ratio = total/year_total) %&gt;% unique() fig1 &lt;- ggplot(data_inter) + geom_point(aes(x = Year, y = ratio, color = Personal.Income))+ geom_line(aes(x = Year, y = ratio, group = Personal.Income, color = Personal.Income)) ggplotly(fig1) data_inter_gender&lt;-data_p %&gt;% group_by(Gender,Year, Personal.Income) %&gt;% #if we study gender, add Gender mutate(total = sum(Population.Count)) %&gt;% group_by(Gender, Year) %&gt;% mutate(year_total_G = sum(Population.Count)) %&gt;% ungroup() %&gt;% summarise(Year = Year, Gender = Gender, Personal.Income = Personal.Income, ratio = total/year_total_G) %&gt;% unique() fig2 &lt;- ggplot(data_inter_gender) + geom_point(aes(x = Year, y = ratio, color = Personal.Income))+ geom_line(aes(x = Year, y = ratio, group = Personal.Income, color = Personal.Income))+facet_grid(~Gender) ggplotly(fig2) 6.0.2 interactive choices for users, bar plots #total n1&lt;-nPlot(ratio ~ Year, group = &#39;Personal.Income&#39;, data = data_inter, type = &#39;multiBarChart&#39;) n1 $ yAxis(tickFormat = &quot;#! function(d) {return d3.format(&#39;,.2f&#39;)(d)} !#&quot;) n1$print(&#39;inline&#39;, include_assets = F, cdn = FALSE) ## ## &lt;div id = &#39;inline&#39; class = &#39;rChart nvd3&#39;&gt;&lt;/div&gt; ## &lt;script type=&#39;text/javascript&#39;&gt; ## $(document).ready(function(){ ## drawinline() ## }); ## function drawinline(){ ## var opts = { ## &quot;dom&quot;: &quot;inline&quot;, ## &quot;width&quot;: 800, ## &quot;height&quot;: 400, ## &quot;x&quot;: &quot;Year&quot;, ## &quot;y&quot;: &quot;ratio&quot;, ## &quot;group&quot;: &quot;Personal.Income&quot;, ## &quot;type&quot;: &quot;multiBarChart&quot;, ## &quot;id&quot;: &quot;inline&quot; ## }, ## data = [ ## { ## &quot;Year&quot;: &quot;2008&quot;, ## &quot;Personal.Income&quot;: &quot;No Income&quot;, ## &quot;ratio&quot;: 0.1328750003925 ## }, ## { ## &quot;Year&quot;: &quot;2008&quot;, ## &quot;Personal.Income&quot;: &quot;[5k,10k)&quot;, ## &quot;ratio&quot;: 0.0734457745864 ## }, ## { ## &quot;Year&quot;: &quot;2008&quot;, ## &quot;Personal.Income&quot;: &quot;[10k,15k)&quot;, ## &quot;ratio&quot;: 0.08503806571889 ## }, ## { ## &quot;Year&quot;: &quot;2008&quot;, ## &quot;Personal.Income&quot;: &quot;[15k,25k)&quot;, ## &quot;ratio&quot;: 0.1534461363739 ## }, ## { ## &quot;Year&quot;: &quot;2008&quot;, ## &quot;Personal.Income&quot;: &quot;[25k,35k)&quot;, ## &quot;ratio&quot;: 0.1230597796255 ## }, ## { ## &quot;Year&quot;: &quot;2008&quot;, ## &quot;Personal.Income&quot;: &quot;[35k,50k)&quot;, ## &quot;ratio&quot;: 0.1388598659577 ## }, ## { ## &quot;Year&quot;: &quot;2008&quot;, ## &quot;Personal.Income&quot;: &quot;[50k,75k)&quot;, ## &quot;ratio&quot;: 0.1442909903985 ## }, ## { ## &quot;Year&quot;: &quot;2008&quot;, ## &quot;Personal.Income&quot;: &quot;[75k,inf)&quot;, ## &quot;ratio&quot;: 0.1489843869466 ## }, ## { ## &quot;Year&quot;: &quot;2009&quot;, ## &quot;Personal.Income&quot;: &quot;No Income&quot;, ## &quot;ratio&quot;: 0.1264817334241 ## }, ## { ## &quot;Year&quot;: &quot;2009&quot;, ## &quot;Personal.Income&quot;: &quot;[5k,10k)&quot;, ## &quot;ratio&quot;: 0.08212908730435 ## }, ## { ## &quot;Year&quot;: &quot;2009&quot;, ## &quot;Personal.Income&quot;: &quot;[10k,15k)&quot;, ## &quot;ratio&quot;: 0.08711445512933 ## }, ## { ## &quot;Year&quot;: &quot;2009&quot;, ## &quot;Personal.Income&quot;: &quot;[15k,25k)&quot;, ## &quot;ratio&quot;: 0.1603310076424 ## }, ## { ## &quot;Year&quot;: &quot;2009&quot;, ## &quot;Personal.Income&quot;: &quot;[25k,35k)&quot;, ## &quot;ratio&quot;: 0.1204172326732 ## }, ## { ## &quot;Year&quot;: &quot;2009&quot;, ## &quot;Personal.Income&quot;: &quot;[35k,50k)&quot;, ## &quot;ratio&quot;: 0.1321231612664 ## }, ## { ## &quot;Year&quot;: &quot;2009&quot;, ## &quot;Personal.Income&quot;: &quot;[50k,75k)&quot;, ## &quot;ratio&quot;: 0.1400736224178 ## }, ## { ## &quot;Year&quot;: &quot;2009&quot;, ## &quot;Personal.Income&quot;: &quot;[75k,inf)&quot;, ## &quot;ratio&quot;: 0.1513297001425 ## }, ## { ## &quot;Year&quot;: &quot;2010&quot;, ## &quot;Personal.Income&quot;: &quot;No Income&quot;, ## &quot;ratio&quot;: 0.1421173338886 ## }, ## { ## &quot;Year&quot;: &quot;2010&quot;, ## &quot;Personal.Income&quot;: &quot;[5k,10k)&quot;, ## &quot;ratio&quot;: 0.08256252306128 ## }, ## { ## &quot;Year&quot;: &quot;2010&quot;, ## &quot;Personal.Income&quot;: &quot;[10k,15k)&quot;, ## &quot;ratio&quot;: 0.09053556931225 ## }, ## { ## &quot;Year&quot;: &quot;2010&quot;, ## &quot;Personal.Income&quot;: &quot;[15k,25k)&quot;, ## &quot;ratio&quot;: 0.1547553976077 ## }, ## { ## &quot;Year&quot;: &quot;2010&quot;, ## &quot;Personal.Income&quot;: &quot;[25k,35k)&quot;, ## &quot;ratio&quot;: 0.1198847402394 ## }, ## { ## &quot;Year&quot;: &quot;2010&quot;, ## &quot;Personal.Income&quot;: &quot;[35k,50k)&quot;, ## &quot;ratio&quot;: 0.1305453238045 ## }, ## { ## &quot;Year&quot;: &quot;2010&quot;, ## &quot;Personal.Income&quot;: &quot;[50k,75k)&quot;, ## &quot;ratio&quot;: 0.1323006130552 ## }, ## { ## &quot;Year&quot;: &quot;2010&quot;, ## &quot;Personal.Income&quot;: &quot;[75k,inf)&quot;, ## &quot;ratio&quot;: 0.147298499031 ## }, ## { ## &quot;Year&quot;: &quot;2011&quot;, ## &quot;Personal.Income&quot;: &quot;No Income&quot;, ## &quot;ratio&quot;: 0.1561693017081 ## }, ## { ## &quot;Year&quot;: &quot;2011&quot;, ## &quot;Personal.Income&quot;: &quot;[5k,10k)&quot;, ## &quot;ratio&quot;: 0.07934051015295 ## }, ## { ## &quot;Year&quot;: &quot;2011&quot;, ## &quot;Personal.Income&quot;: &quot;[10k,15k)&quot;, ## &quot;ratio&quot;: 0.09661131953591 ## }, ## { ## &quot;Year&quot;: &quot;2011&quot;, ## &quot;Personal.Income&quot;: &quot;[15k,25k)&quot;, ## &quot;ratio&quot;: 0.1525424678615 ## }, ## { ## &quot;Year&quot;: &quot;2011&quot;, ## &quot;Personal.Income&quot;: &quot;[25k,35k)&quot;, ## &quot;ratio&quot;: 0.1149257837959 ## }, ## { ## &quot;Year&quot;: &quot;2011&quot;, ## &quot;Personal.Income&quot;: &quot;[35k,50k)&quot;, ## &quot;ratio&quot;: 0.1271933019726 ## }, ## { ## &quot;Year&quot;: &quot;2011&quot;, ## &quot;Personal.Income&quot;: &quot;[50k,75k)&quot;, ## &quot;ratio&quot;: 0.1288674105369 ## }, ## { ## &quot;Year&quot;: &quot;2011&quot;, ## &quot;Personal.Income&quot;: &quot;[75k,inf)&quot;, ## &quot;ratio&quot;: 0.1443499044362 ## }, ## { ## &quot;Year&quot;: &quot;2012&quot;, ## &quot;Personal.Income&quot;: &quot;No Income&quot;, ## &quot;ratio&quot;: 0.159636312384 ## }, ## { ## &quot;Year&quot;: &quot;2012&quot;, ## &quot;Personal.Income&quot;: &quot;[5k,10k)&quot;, ## &quot;ratio&quot;: 0.08930475356364 ## }, ## { ## &quot;Year&quot;: &quot;2012&quot;, ## &quot;Personal.Income&quot;: &quot;[10k,15k)&quot;, ## &quot;ratio&quot;: 0.09017279455122 ## }, ## { ## &quot;Year&quot;: &quot;2012&quot;, ## &quot;Personal.Income&quot;: &quot;[15k,25k)&quot;, ## &quot;ratio&quot;: 0.1547747643757 ## }, ## { ## &quot;Year&quot;: &quot;2012&quot;, ## &quot;Personal.Income&quot;: &quot;[25k,35k)&quot;, ## &quot;ratio&quot;: 0.112236435336 ## }, ## { ## &quot;Year&quot;: &quot;2012&quot;, ## &quot;Personal.Income&quot;: &quot;[35k,50k)&quot;, ## &quot;ratio&quot;: 0.1244211638817 ## }, ## { ## &quot;Year&quot;: &quot;2012&quot;, ## &quot;Personal.Income&quot;: &quot;[50k,75k)&quot;, ## &quot;ratio&quot;: 0.1200526700674 ## }, ## { ## &quot;Year&quot;: &quot;2012&quot;, ## &quot;Personal.Income&quot;: &quot;[75k,inf)&quot;, ## &quot;ratio&quot;: 0.1494011058404 ## }, ## { ## &quot;Year&quot;: &quot;2013&quot;, ## &quot;Personal.Income&quot;: &quot;No Income&quot;, ## &quot;ratio&quot;: 0.1521399596291 ## }, ## { ## &quot;Year&quot;: &quot;2013&quot;, ## &quot;Personal.Income&quot;: &quot;[5k,10k)&quot;, ## &quot;ratio&quot;: 0.07987895303516 ## }, ## { ## &quot;Year&quot;: &quot;2013&quot;, ## &quot;Personal.Income&quot;: &quot;[10k,15k)&quot;, ## &quot;ratio&quot;: 0.08834730948474 ## }, ## { ## &quot;Year&quot;: &quot;2013&quot;, ## &quot;Personal.Income&quot;: &quot;[15k,25k)&quot;, ## &quot;ratio&quot;: 0.1520372811959 ## }, ## { ## &quot;Year&quot;: &quot;2013&quot;, ## &quot;Personal.Income&quot;: &quot;[25k,35k)&quot;, ## &quot;ratio&quot;: 0.1184967715115 ## }, ## { ## &quot;Year&quot;: &quot;2013&quot;, ## &quot;Personal.Income&quot;: &quot;[35k,50k)&quot;, ## &quot;ratio&quot;: 0.1261142672134 ## }, ## { ## &quot;Year&quot;: &quot;2013&quot;, ## &quot;Personal.Income&quot;: &quot;[50k,75k)&quot;, ## &quot;ratio&quot;: 0.1214883739211 ## }, ## { ## &quot;Year&quot;: &quot;2013&quot;, ## &quot;Personal.Income&quot;: &quot;[75k,inf)&quot;, ## &quot;ratio&quot;: 0.1614970840091 ## }, ## { ## &quot;Year&quot;: &quot;2014&quot;, ## &quot;Personal.Income&quot;: &quot;No Income&quot;, ## &quot;ratio&quot;: 0.1632038548276 ## }, ## { ## &quot;Year&quot;: &quot;2014&quot;, ## &quot;Personal.Income&quot;: &quot;[5k,10k)&quot;, ## &quot;ratio&quot;: 0.08059992610039 ## }, ## { ## &quot;Year&quot;: &quot;2014&quot;, ## &quot;Personal.Income&quot;: &quot;[10k,15k)&quot;, ## &quot;ratio&quot;: 0.08401298747167 ## }, ## { ## &quot;Year&quot;: &quot;2014&quot;, ## &quot;Personal.Income&quot;: &quot;[15k,25k)&quot;, ## &quot;ratio&quot;: 0.1496325995184 ## }, ## { ## &quot;Year&quot;: &quot;2014&quot;, ## &quot;Personal.Income&quot;: &quot;[25k,35k)&quot;, ## &quot;ratio&quot;: 0.118963004835 ## }, ## { ## &quot;Year&quot;: &quot;2014&quot;, ## &quot;Personal.Income&quot;: &quot;[35k,50k)&quot;, ## &quot;ratio&quot;: 0.1234732208919 ## }, ## { ## &quot;Year&quot;: &quot;2014&quot;, ## &quot;Personal.Income&quot;: &quot;[50k,75k)&quot;, ## &quot;ratio&quot;: 0.1201359505486 ## }, ## { ## &quot;Year&quot;: &quot;2014&quot;, ## &quot;Personal.Income&quot;: &quot;[75k,inf)&quot;, ## &quot;ratio&quot;: 0.1599784558064 ## } ## ] ## ## if(!(opts.type===&quot;pieChart&quot; || opts.type===&quot;sparklinePlus&quot; || opts.type===&quot;bulletChart&quot;)) { ## var data = d3.nest() ## .key(function(d){ ## //return opts.group === undefined ? &#39;main&#39; : d[opts.group] ## //instead of main would think a better default is opts.x ## return opts.group === undefined ? opts.y : d[opts.group]; ## }) ## .entries(data); ## } ## ## if (opts.disabled != undefined){ ## data.map(function(d, i){ ## d.disabled = opts.disabled[i] ## }) ## } ## ## nv.addGraph(function() { ## var chart = nv.models[opts.type]() ## .width(opts.width) ## .height(opts.height) ## ## if (opts.type != &quot;bulletChart&quot;){ ## chart ## .x(function(d) { return d[opts.x] }) ## .y(function(d) { return d[opts.y] }) ## } ## ## ## ## ## ## ## ## ## chart.yAxis ## .tickFormat( function(d) {return d3.format(&#39;,.2f&#39;)(d)} ) ## ## d3.select(&quot;#&quot; + opts.id) ## .append(&#39;svg&#39;) ## .datum(data) ## .transition().duration(500) ## .call(chart); ## ## nv.utils.windowResize(chart.update); ## return chart; ## }); ## }; ## &lt;/script&gt; "],["404.html", "Page not found", " Page not found The page you requested cannot be found (perhaps it was moved or renamed). You may want to try searching to find the page's new location, or use the table of contents to find the page you are looking for. "]]
